<!DOCTYPE html>
<html><head><meta charset="UTF-8"><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>couchbase-clj.query documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Couchbase-clj 0.2.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="couchbase-clj.client.html"><span>couchbase-clj.client</span></a></li><li><a href="couchbase-clj.client-builder.html"><span>couchbase-clj.client-builder</span></a></li><li><a href="couchbase-clj.config.html"><span>couchbase-clj.config</span></a></li><li><a href="couchbase-clj.future.html"><span>couchbase-clj.future</span></a></li><li class="current"><a href="couchbase-clj.query.html"><span>couchbase-clj.query</span></a></li><li><a href="couchbase-clj.util.html"><span>couchbase-clj.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="couchbase-clj.query.html#var--%3ECouchbaseCljQuery"><span>-&gt;CouchbaseCljQuery</span></a></li><li><a href="couchbase-clj.query.html#var-ICouchbaseCljQuery"><span>ICouchbaseCljQuery</span></a></li><li><a href="couchbase-clj.query.html#var-assoc%21"><span>assoc!</span></a></li><li><a href="couchbase-clj.query.html#var-create-query"><span>create-query</span></a></li><li><a href="couchbase-clj.query.html#var-defquery"><span>defquery</span></a></li><li><a href="couchbase-clj.query.html#var-get-query"><span>get-query</span></a></li><li><a href="couchbase-clj.query.html#var-include-docs%3F"><span>include-docs?</span></a></li><li><a href="couchbase-clj.query.html#var-method-map"><span>method-map</span></a></li><li><a href="couchbase-clj.query.html#var-reduce%3F"><span>reduce?</span></a></li><li><a href="couchbase-clj.query.html#var-set-desc%21"><span>set-desc!</span></a></li><li><a href="couchbase-clj.query.html#var-set-endkey-doc-id%21"><span>set-endkey-doc-id!</span></a></li><li><a href="couchbase-clj.query.html#var-set-group%21"><span>set-group!</span></a></li><li><a href="couchbase-clj.query.html#var-set-group-level%21"><span>set-group-level!</span></a></li><li><a href="couchbase-clj.query.html#var-set-include-docs%21"><span>set-include-docs!</span></a></li><li><a href="couchbase-clj.query.html#var-set-inclusive-end%21"><span>set-inclusive-end!</span></a></li><li><a href="couchbase-clj.query.html#var-set-key%21"><span>set-key!</span></a></li><li><a href="couchbase-clj.query.html#var-set-limit%21"><span>set-limit!</span></a></li><li><a href="couchbase-clj.query.html#var-set-on-error%21"><span>set-on-error!</span></a></li><li><a href="couchbase-clj.query.html#var-set-range%21"><span>set-range!</span></a></li><li><a href="couchbase-clj.query.html#var-set-range-end%21"><span>set-range-end!</span></a></li><li><a href="couchbase-clj.query.html#var-set-range-start%21"><span>set-range-start!</span></a></li><li><a href="couchbase-clj.query.html#var-set-reduce%21"><span>set-reduce!</span></a></li><li><a href="couchbase-clj.query.html#var-set-skip%21"><span>set-skip!</span></a></li><li><a href="couchbase-clj.query.html#var-set-stale%21"><span>set-stale!</span></a></li><li><a href="couchbase-clj.query.html#var-set-startkey-doc-id%21"><span>set-startkey-doc-id!</span></a></li><li><a href="couchbase-clj.query.html#var-str"><span>str</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>couchbase-clj.query documentation</h2><pre class="doc"></pre><div class="public" id="var--%3ECouchbaseCljQuery"><h3>-&gt;CouchbaseCljQuery</h3><div class="usage"><code>(-&gt;CouchbaseCljQuery q opts)</code></div><pre class="doc">Positional factory function for class couchbase_clj.query.CouchbaseCljQuery.
</pre></div><div class="public" id="var-ICouchbaseCljQuery"><h3>ICouchbaseCljQuery</h3><div class="usage"></div><pre class="doc"></pre></div><div class="public" id="var-assoc%21"><h3>assoc!</h3><div class="usage"><code>(assoc! clj-query m)</code></div><pre class="doc">Update the query, after created by create-query or defquery.

ex:
(defquery query {:include-docs true
                 :group true})

(assoc! query {:on-error :stop
               :group-level 2
               :limit 100})</pre></div><div class="public" id="var-create-query"><h3>create-query</h3><div class="usage"><code>(create-query m)</code></div><pre class="doc">Create and return a view query.
Specify key/value arguments as a map.  

ex:
(create-query {:include-docs true
               :desc false
               :startkey-doc-id :doc1
               :endkey-doc-id :doc2
               :group true
               :group-level 1
               :inclusive-end false
               :key :key1
               :limit 100
               :range [:start-key :end-key]
               :range-start :start-key2
               :range-end :end-key2
               :reduce false
               :skip 1
               :stale false
               :on-error :continue})</pre></div><div class="public" id="var-defquery"><h3>defquery</h3><h4 class="macro">macro</h4><div class="usage"><code>(defquery name m)</code></div><pre class="doc">A macro that creates Var of a view query.
Specify the name of the Var and key/value arguments as a map.  

ex:
(defquery query {:include-docs true
                 :desc false
                 :startkey-doc-id :doc1
                 :endkey-doc-id :doc2
                 :group true
                 :group-level 1
                 :inclusive-end false
                 :key :key1
                 :limit 100
                 :range [:start-key :end-key]
                 :range-start :start-key2
                 :range-end :end-key2
                 :reduce false
                 :skip 1
                 :stale false
                 :on-error :continue})</pre></div><div class="public" id="var-get-query"><h3>get-query</h3><div class="usage"><code>(get-query clj-query)</code></div><pre class="doc">Get the Query object.
</pre></div><div class="public" id="var-include-docs%3F"><h3>include-docs?</h3><div class="usage"><code>(include-docs? clj-query)</code></div><pre class="doc">Returns true if the original JSON docuemnt will be included.
</pre></div><div class="public" id="var-method-map"><h3>method-map</h3><div class="usage"></div><pre class="doc">A key/value conversion map of query options
to corresponding set functions.</pre></div><div class="public" id="var-reduce%3F"><h3>reduce?</h3><div class="usage"><code>(reduce? clj-query)</code></div><pre class="doc">Returns true if the reduce function will be used.
</pre></div><div class="public" id="var-set-desc%21"><h3>set-desc!</h3><div class="usage"><code>(set-desc! clj-query b)</code></div><pre class="doc">Set true to retrieve the results in descending order.
</pre></div><div class="public" id="var-set-endkey-doc-id%21"><h3>set-endkey-doc-id!</h3><div class="usage"><code>(set-endkey-doc-id! clj-query doc-id)</code></div><pre class="doc">Set the document ID to end at. doc-id can be a keyword or a string.
</pre></div><div class="public" id="var-set-group%21"><h3>set-group!</h3><div class="usage"><code>(set-group! clj-query b)</code></div><pre class="doc">Set true to reduce to a set of distinct keys.
</pre></div><div class="public" id="var-set-group-level%21"><h3>set-group-level!</h3><div class="usage"><code>(set-group-level! clj-query group-level)</code></div><pre class="doc">Set the group-level as an integer to specify how many items of the keys
are used in grouping.</pre></div><div class="public" id="var-set-include-docs%21"><h3>set-include-docs!</h3><div class="usage"><code>(set-include-docs! clj-query b)</code></div><pre class="doc">Set true to include the original JSON document.
</pre></div><div class="public" id="var-set-inclusive-end%21"><h3>set-inclusive-end!</h3><div class="usage"><code>(set-inclusive-end! clj-query b)</code></div><pre class="doc">Set true to include the endkey in the result.
</pre></div><div class="public" id="var-set-key%21"><h3>set-key!</h3><div class="usage"><code>(set-key! clj-query x)</code></div><pre class="doc">Set the key to fetch only the rows with the given keyword, which data
will be converted to a JSON string value.

ex1: (set-key! 1000)
ex2: (set-key! :a)
ex3: (set-key! &quot;a&quot;)
ex4: (set-key! [1 2])</pre></div><div class="public" id="var-set-limit%21"><h3>set-limit!</h3><div class="usage"><code>(set-limit! clj-query limit)</code></div><pre class="doc">Set the integer limit to specify
the maximum number of rows to return.</pre></div><div class="public" id="var-set-on-error%21"><h3>set-on-error!</h3><div class="usage"><code>(set-on-error! clj-query oe)</code></div><pre class="doc">Set the option to decide when an error occurs.
When oe is equal to:
  :stop
  Stop processing the query when an error occurs and populate the
  errors response with details.

  :continue or other values (default value)
  Continue processing the query even if errors occur, populating the errors
  response at the end of the query response.</pre></div><div class="public" id="var-set-range%21"><h3>set-range!</h3><div class="usage"><code>(set-range! clj-query coll)</code></div><pre class="doc">Set both startkey and endkey in a sequential collection.
Both start-key and end-key will be converted to a JSON string.

ex1: (set-range-start! [1000 2000])
ex2: (set-range-start! [:a :b])
ex3: (set-range-start! [&quot;a&quot; &quot;b&quot;])
ex4: (set-range-start! [[1 2] [3 4])</pre></div><div class="public" id="var-set-range-end%21"><h3>set-range-end!</h3><div class="usage"><code>(set-range-end! clj-query x)</code></div><pre class="doc">Set the end key, which the data will be converted to a JSON string value.

ex1: (set-range-end! 2000)
ex2: (set-range-end! :b)
ex3: (set-range-end! &quot;b&quot;)
ex4: (set-range-end! [3 4])</pre></div><div class="public" id="var-set-range-start%21"><h3>set-range-start!</h3><div class="usage"><code>(set-range-start! clj-query x)</code></div><pre class="doc">Set the start key, which the data will be converted to a JSON string value.

ex1: (set-range-start! 1000)
ex2: (set-range-start! :a)
ex3: (set-range-start! &quot;a&quot;)
ex4: (set-range-start! [1 2])</pre></div><div class="public" id="var-set-reduce%21"><h3>set-reduce!</h3><div class="usage"><code>(set-reduce! clj-query b)</code></div><pre class="doc">Set true to use the reduce function of the view.
</pre></div><div class="public" id="var-set-skip%21"><h3>set-skip!</h3><div class="usage"><code>(set-skip! clj-query docs-to-skip)</code></div><pre class="doc">Set the number of documents
to skip as an integer.</pre></div><div class="public" id="var-set-stale%21"><h3>set-stale!</h3><div class="usage"><code>(set-stale! clj-query stl)</code></div><pre class="doc">Set the stale option as a keyword.
When stale is equal to:
  :ok, :true, or boolean true then the stale will be ok.
  Index will not be updated.

  :false or boolean false then the stale will be false.
  Index will be updated before the query is executed.

  :update-after or other value then the stale will be update_after.
  Index will be updated after results are returned.</pre></div><div class="public" id="var-set-startkey-doc-id%21"><h3>set-startkey-doc-id!</h3><div class="usage"><code>(set-startkey-doc-id! clj-query doc-id)</code></div><pre class="doc">Set the document ID to start at. doc-id can be a keyword or a string.
</pre></div><div class="public" id="var-str"><h3>str</h3><div class="usage"><code>(str clj-query)</code></div><pre class="doc">Print the query created, in the form of url query parameters.
</pre></div></div></body></html>