<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>couchbase-clj.client-builder documentation</title></head><body><div id="header"><h1><a href="index.html">Couchbase-clj 0.1.0 API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="couchbase-clj.client.html"><span>couchbase-clj.client</span></a></li><li class="current"><a href="couchbase-clj.client-builder.html"><span>couchbase-clj.client-builder</span></a></li><li><a href="couchbase-clj.config.html"><span>couchbase-clj.config</span></a></li><li><a href="couchbase-clj.future.html"><span>couchbase-clj.future</span></a></li><li><a href="couchbase-clj.query.html"><span>couchbase-clj.query</span></a></li><li><a href="couchbase-clj.util.html"><span>couchbase-clj.util</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="couchbase-clj.client-builder.html#var--%3ECouchbaseCljClientBuilder"><span>-&gt;CouchbaseCljClientBuilder</span></a></li><li><a href="couchbase-clj.client-builder.html#var-build"><span>build</span></a></li><li><a href="couchbase-clj.client-builder.html#var-create-client-builder"><span>create-client-builder</span></a></li><li><a href="couchbase-clj.client-builder.html#var-create-factory"><span>create-factory</span></a></li><li><a href="couchbase-clj.client-builder.html#var-get-factory-builder"><span>get-factory-builder</span></a></li><li><a href="couchbase-clj.client-builder.html#var-method-map"><span>method-map</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-auth-descriptor"><span>set-auth-descriptor</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-daemon"><span>set-daemon</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-failure-mode"><span>set-failure-mode</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-hash-alg"><span>set-hash-alg</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-max-reconnect-delay"><span>set-max-reconnect-delay</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-min-reconnect-interval"><span>set-min-reconnect-interval</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-obs-poll-interval"><span>set-obs-poll-interval</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-obs-poll-max"><span>set-obs-poll-max</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-op-queue-max-block-time"><span>set-op-queue-max-block-time</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-op-timeout"><span>set-op-timeout</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-read-buffer-size"><span>set-read-buffer-size</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-should-optimize"><span>set-should-optimize</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-timeout-exception-threshold"><span>set-timeout-exception-threshold</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-transcoder"><span>set-transcoder</span></a></li><li><a href="couchbase-clj.client-builder.html#var-set-use-nagle-algorithm"><span>set-use-nagle-algorithm</span></a></li><li><a href="couchbase-clj.client-builder.html#var-str-%3Euri"><span>str-&gt;uri</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>couchbase-clj.client-builder documentation</h2><pre class="doc"></pre><div class="public" id="var--%3ECouchbaseCljClientBuilder"><h3>-&gt;CouchbaseCljClientBuilder</h3><div class="usage"><code>(-&gt;CouchbaseCljClientBuilder cfb)</code></div><pre class="doc">Positional factory function for class couchbase_clj.client_builder.CouchbaseCljClientBuilder.
</pre></div><div class="public" id="var-build"><h3>build</h3><div class="usage"><code>(build {:keys [bucket username password uris failure-mode hash-alg], :as opts})</code></div><pre class="doc">Create CouchbaseConnectionFactory object from input.
You can specify keywords arguments: bucket, username, password, uris, and other opts.
bucket is the bucket name. Default value is defined as @default-bucket and is &quot;default&quot;.
username is the bucket username. Default value is defined as @default-username and is a empty string.
Currently username is ignored.
password is the bucket password. Default value is defined as @default-password and is a empty string.
uris is a Collection of string uris, ex: [&quot;http://127.0.0.1:8091/pools&quot;]
Other options can be specified for CouchbaseConnectionFactoryBuilder object creation.
Internally, :failure-mode and :hash-alg must have a value and those default values are
:redistribute and :native-hash respectively.
All options can be looked at method-map Var.</pre></div><div class="public" id="var-create-client-builder"><h3>create-client-builder</h3><div class="usage"><code>(create-client-builder opts)</code></div><pre class="doc">Create and return a CouchbaseCljClientBuilder object.
This will create a CouchbaseConnectionFactoryBuilder object internally.
opts is a map to specify options for CouchbaseConnectionFactoryBuilder object.
Currenty :hash-alg and :failure-mode keywords must be specified,
ex: (client-client-builder {:hash-alg :native-hash :failure-mode :redistribute}).
After creating, you can set options, ex: (set-op-timeout clj-client-builder timeout).
All options can be looked at method-map Var.
You can get the internal CouchbaseConnectionFactoryBuilder and pass it to create-factory function to build client.</pre></div><div class="public" id="var-create-factory"><h3>create-factory</h3><div class="usage"><code>(create-factory {:keys [factory-builder bucket username password uris]})</code></div><pre class="doc">Create a CouchbaseConnectionFactory object.
You must specify all keyword arguments: factory-builder, bucket, username, password, uris.
factory-builder can be created from create-client-bulider with get-factory-builder function,
:ex (get-factory-builder (create-client-builder opts)).
uris must be a sequential collection of URI objects, :ex [(URI. &quot;http://127.0.0.1:8091/pools&quot;)]</pre></div><div class="public" id="var-get-factory-builder"><h3>get-factory-builder</h3><div class="usage"><code>(get-factory-builder clj-client-builder)</code></div><pre class="doc">Get the CouchbaseConnectionFactoryBuilder object.
</pre></div><div class="public" id="var-method-map"><h3>method-map</h3><div class="usage"></div><pre class="doc">A key/value conversion map of client options to corresponding set functions.
</pre></div><div class="public" id="var-set-auth-descriptor"><h3>set-auth-descriptor</h3><div class="usage"><code>(set-auth-descriptor clj-client-builder dsc)</code></div><pre class="doc">Set the auth descriptor to enable authentication on new connections.
dsc is an AuthDescriptor object.</pre></div><div class="public" id="var-set-daemon"><h3>set-daemon</h3><div class="usage"><code>(set-daemon clj-client-builder b)</code></div><pre class="doc">If true, the IO thread should be a daemon thread.
</pre></div><div class="public" id="var-set-failure-mode"><h3>set-failure-mode</h3><div class="usage"><code>(set-failure-mode clj-client-builder k)</code></div><pre class="doc">Set the failure mode as a keyword value.
Default values is :redistribute.
Other values are :retry, :cancel.
In redistribute mode, the failure of a node will cause its current queue
and future requests to move to the next logical node in the cluster for a
given key.
Retry mode is appropriate when you have a rare short downtime of a
couchbase node that will be back quickly, and your app is written to not
wait very long for async command completion.
In cancel mode, all operations are automatically cancelled</pre></div><div class="public" id="var-set-hash-alg"><h3>set-hash-alg</h3><div class="usage"><code>(set-hash-alg clj-client-builder k)</code></div><pre class="doc">Set the hashing algorithm as a keyword value.
Default value is :native-hash.
Other values are :ketama-hash, :crc-hash,
:fnv1-64-hash, :fnv1a-64-hash, :fnv1-32-hash, :fnv1a-32-hash.</pre></div><div class="public" id="var-set-max-reconnect-delay"><h3>set-max-reconnect-delay</h3><div class="usage"><code>(set-max-reconnect-delay clj-client-builder delay)</code></div><pre class="doc">Set maximum number of milliseconds to wait between reconnect attempts.
Default value is 30000.
You can set this value lower when there is intermittent and frequent connection failures.</pre></div><div class="public" id="var-set-min-reconnect-interval"><h3>set-min-reconnect-interval</h3><div class="usage"><code>(set-min-reconnect-interval clj-client-builder interval)</code></div><pre class="doc">Set the default minimum reconnect interval in millisecs.
Default values is 1100
This value means that if a reconnect is needed,
it won't try to reconnect more frequently than default value.
The internal connections take up to 500ms per request.
You can set this to higher to try reconnecting less frequently.</pre></div><div class="public" id="var-set-obs-poll-interval"><h3>set-obs-poll-interval</h3><div class="usage"><code>(set-obs-poll-interval clj-client-builder interval)</code></div><pre class="doc">Set the polling interval for Observe operations.
Default value is 100.
Set this higher or lower depending on whether the polling needs to happen less or more frequently
depending on the tolerance limits for the Observe operation as compared to other operations.</pre></div><div class="public" id="var-set-obs-poll-max"><h3>set-obs-poll-max</h3><div class="usage"><code>(set-obs-poll-max clj-client-builder poll)</code></div><pre class="doc">Set the maximum times to poll the master and replica(s) to meet the desired durability requirements.
Default value is 400.
You could set this value higher if the Observe operations do not complete after the normal polling.</pre></div><div class="public" id="var-set-op-queue-max-block-time"><h3>set-op-queue-max-block-time</h3><div class="usage"><code>(set-op-queue-max-block-time clj-client-builder time)</code></div><pre class="doc">Set the maximum time to block waiting for op queue operations to complete, in milliseconds.
Default value is 10000.
The default has been set with the expectation that most requests are interactive and waiting
for more than a few seconds is thus more undesirable than failing the request.
However, this value could be lowered for operations not to block for this time.</pre></div><div class="public" id="var-set-op-timeout"><h3>set-op-timeout</h3><div class="usage"><code>(set-op-timeout clj-client-builder timeout)</code></div><pre class="doc">Set the time for an operation to Timeout.
Default values is 2500.
You can set this value higher when there is heavy network traffic and timeouts happen frequently.
This is used as a default timeout value for sync and async operations.
For async operations, it is internally used as a default timeout value to get the result from Future objects.</pre></div><div class="public" id="var-set-read-buffer-size"><h3>set-read-buffer-size</h3><div class="usage"><code>(set-read-buffer-size clj-client-builder size)</code></div><pre class="doc">Set the read buffer size.
Default value is 16384.</pre></div><div class="public" id="var-set-should-optimize"><h3>set-should-optimize</h3><div class="usage"><code>(set-should-optimize clj-client-builder b)</code></div><pre class="doc">Set the optimize behavior for the network.
Default values is false.
You can set this value to be true if the performance should be optimized for the network
as in cases where there are some known issues with the network that may be causing adverse effects on applications.
Currently it is ignored.</pre></div><div class="public" id="var-set-timeout-exception-threshold"><h3>set-timeout-exception-threshold</h3><div class="usage"><code>(set-timeout-exception-threshold clj-client-builder timeout)</code></div><pre class="doc">Set the maximum timeout exception threshold.
Default threshold is 998.
Minimum threshold is 2 and is calculated by timeout - 2.
For this reason, specify timeout equal to theshold + 2,
ex: (set-timeout-exception-threshold client_builder_object 1000)</pre></div><div class="public" id="var-set-transcoder"><h3>set-transcoder</h3><div class="usage"><code>(set-transcoder clj-client-builder transcoder)</code></div><pre class="doc">Set the default transcoder.
transcoder is a transcoder object.
Default transcoder is SerializingTranscoder.</pre></div><div class="public" id="var-set-use-nagle-algorithm"><h3>set-use-nagle-algorithm</h3><div class="usage"><code>(set-use-nagle-algorithm clj-client-builder b)</code></div><pre class="doc">Set to true if you'd like to enable the Nagle algorithm.
</pre></div><div class="public" id="var-str-%3Euri"><h3>str-&gt;uri</h3><div class="usage"><code>(str-&gt;uri s)</code></div><pre class="doc">Creates java.net.URI from the input string.
</pre></div></div></body></html>